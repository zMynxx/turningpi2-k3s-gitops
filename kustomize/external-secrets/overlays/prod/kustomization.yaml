apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

sortOptions:
  order: legacy
  legacySortOptions:
    orderLast:
    - ClusterSecretStore 

# helmCharts: https://kubectl.docs.kubernetes.io/references/kustomize/builtins/#_helmchartinflationgenerator_
helmCharts:
# Use a Helm chart from the official Helm chart repository
- name: &name external-secrets 
  version: 0.9.13
  repo: https://charts.external-secrets.io 
  releaseName: *name
  valuesFile: values.yaml
  namespace: *name 
  includeCRDs: true

namespace: *name 

# Additonal resources to apply - do not worry about the order if you are using ArgoCD
resources:
- namespace.yaml 
- eso-clustersecretstore.yaml
- username-eso.yaml
